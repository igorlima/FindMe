(function(a,d,j,b,f){var i=a.Pedido=function(){this._itens=this._itens||new list()};i.fn=i.prototype;i.fn.length=function(){return this._itens.len()};i.fn.contains=function(k){return this._itens.hasKey(k._id)};i.fn.get=function(k){return this._itens.get(k._id)};i.fn.itens=function(){return this._itens.values()};i.fn.add=function(k){if(!this._itens.hasKey(k._id)){this._itens.add(k._id,k)}k.qte(k.qte()+1);i.saveItem(k)};i.fn.remove=function(k){if(!this._itens.hasKey(k._id)){return}k.qte(k.qte()-1);(k.qte()<=0)&&this._itens.remove(k._id);i.saveItem(k)};i.saveItem=function(k){a.storage.get("pedido",function(l){var l=l?l.data:{};l[k._id]=k.qte();a.storage.save({key:"pedido",data:l})})};i.load=function(){g();a.spinner.start();d(".popover").load("partials/pedido.html",function(){c();a.spinner.stop()})};var g=function(){d(".popover").on("tap",e).on("click",e).css("display","block");d("html").on("tap",h).on("click",h)};var h=function(k){d(".popover").off("tap",e).off("click",e).css("display","none");d("html").off("tap",h).off("click",h)};var e=function(k){k.stopPropagation()};var c=function(){b.esvaziarPedido=function(){var k=b.pedido()._itens;k.each(function(l){k.get(l).qte(0);k.remove(l)});b.showBtnPedido(false)};b.showBtnPedido=j.observable(b.pedido().length()>0);b.finalizarPedido=function(){h();Path.dispatch("#compra")};b.subTotalItemPedido=function(k){if(!k){return""}return"R$ "+parseFloat(k.qte()*k.price).toFixed(2)};b.totalPedido=j.computed(function(){var l=0;for(var k=0;k<b.pedido().itens().length;k++){l+=b.pedido().itens()[k].qte()*b.pedido().itens()[k].price}return parseFloat(l)});b.strTotalPedido=j.computed(function(){return"R$ "+b.totalPedido().toFixed(2)});j.applyBindingsToDescendants(b,d(".popover")[0])};!function(){f.map("#compra").to(function(){a.spinner.start();head.js("js/_compra"+a.minify+".js",function(){a.Compra.load()})}).enter(a.Util.clearPanel);f.listen()}();!function(){b.pedido=j.observable(new i({}))}()})(window.Lanche,Zepto,ko,Lanche.viewModel,Path);