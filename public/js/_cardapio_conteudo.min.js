(function(h,f,j,b,g){var i=null;var c=h.Lanche.Cardapio.Item=function(){};c.data={};c.load=function(){i=b.cardapio()._id;b.title(b.cardapio().description);b.welcome=j.observable(b.cardapio().welcome);b.url_voltar(g.routes.previous);b.showBtnVoltar(true);b.showMap(false);if(!c.data[i]){e()}else{a()}};var e=function(){f.getJSON(b.cardapio().json,function(k){c.data[i]=k;Lanche.storage.get("cardapioItems",function(l){var l=l?l.data:{};l[i]=k;Lanche.storage.save({key:"cardapioItems",data:l},function(){a()})})})};var a=function(){f("#phone-app").load("partials/cardapio_conteudo.html",function(){d();Lanche.spinner.stop()})};var d=function(){c.data[i].forEach(function(k){k.qte=k.qte||j.observable(0)});b.itens=j.observableArray(c.data[i]);b.moreItem=function(k){b.pedido().add(k)};b.lessItem=function(k){b.pedido().remove(k)};b.priceItem=function(k){return"R$ "+parseFloat(k.price).toFixed(2)};b.total=j.computed(function(){var l=0;for(var k=0;k<b.itens().length;k++){l+=b.itens()[k].qte()*b.itens()[k].price}return"R$ "+parseFloat(l).toFixed(2)});j.applyBindings(b)};!function(){Lanche.storage=new Lawnchair(function(k){k.get(["cardapioItems","pedido"],function(l){var m=l[0];var n=l[1];m&&(c.data=m.data);n&&f.each(n.data,function(p,o){f.each(c.data,function(r,q){f.each(q,function(s,t){if(t._id==p){t.qte=j.observable(o);b.pedido()._itens.add(t._id,t)}})})})})})}()})(window,Zepto,ko,Lanche.viewModel,Path);